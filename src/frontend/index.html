<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover, interactive-widget=resizes-content"
        />

        <!-- PWA Meta Tags -->
        <meta name="description" content="Chat with Claude AI assistant" />
        <meta name="theme-color" content="#000000" />
        <meta name="version" content="0.0.1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black-translucent"
        />
        <meta name="apple-mobile-web-app-title" content="Claude Chats" />

        <!-- Icons -->
        <link rel="icon" type="image/svg+xml" href="./assets/logo.svg" />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="./assets/gen/icon-180.png"
        />

        <!-- PWA Manifest -->
        <link rel="manifest" href="./manifest.json" />

        <title>Claude Chat</title>

        <!-- Theme initialization - prevents FOUC -->
        <script>
            (function () {
                try {
                    const storageKey = "claudet-ui-theme";
                    const theme = localStorage.getItem(storageKey);
                    const systemPrefersDark = window.matchMedia(
                        "(prefers-color-scheme: dark)",
                    ).matches;

                    if (
                        theme === "dark" ||
                        (theme === "system" && systemPrefersDark) ||
                        (!theme && systemPrefersDark)
                    ) {
                        document.documentElement.classList.add("dark");
                    }
                } catch (e) {
                    console.error("Theme initialization failed:", e);
                }
            })();
        </script>

        <script type="module" src="./frontend.tsx" async></script>

        <!-- Service Worker Registration -->
        <script>
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", () => {
                    navigator.serviceWorker
                        .register("/sw.js")
                        .then((registration) => {
                            console.log("SW registered:", registration);
                        })
                        .catch((error) => {
                            console.log("SW registration failed:", error);
                        });
                });
            }
        </script>
    </head>
    <body>
        <div id="root"></div>
    </body>
</html>
